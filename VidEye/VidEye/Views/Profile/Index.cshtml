@model DAL.Models.ProfileVM
@using VidEye.Models

@{
    ViewBag.Title = "Index";
}

<h3>Upload a new video</h3>
@Html.Partial("VideoUploader", new VideoUploaderVM())

<div>
    <h4>Your videos</h4>
    <hr />
    <dl class="dl-horizontal"></dl>
</div>

@foreach (var item in Model.VideoCards)
{
    <div class="col-xs-4"  onclick="ShowVideoPopUp('@item.VideoURL', @item.VideoID, '@item.Title', '@item.Thumbnail');">
        <picture>
            <source srcset="@item.Thumbnail" media="(max-width:400px)" />
            <img src="@item.Thumbnail" alt="default image" />
        </picture>        
    </div>
}


<div class="modal fade" tabindex="-1" role="dialog" id="videoModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="videoTitle"></h3>
            </div>

            <div class="modal-body" id="videoBody">
                <video id="vidplayer" class="azuremediaplayer amp-default-skin" autoplay controls width="640" height="400" poster="" data-setup='{"nativeControlsForTouch": false}'>
                    @*<source src="http://amsdjango.streaming.mediaservices.windows.net/75bbb2b4-9964-414c-a349-c79f99876e33/BigBuckBunny.ism/manifest" type="application/vnd.ms-sstr+xml" />
                    <p class="amp-no-js">
                        This is the first Iterations of my Project. Thank you for watching
                    </p>*@
                </video>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="clearfix">
</div>

<script>
    function ShowVideoPopUp(url, videoid, title, thumbnail) {
        $("#videoTitle").html(title);
        var vidcontent = '<video id="vidplayer" class="azuremediaplayer amp-default-skin" autoplay controls width="640" height="400" poster="' + thumbnail +
        '" data-setup=\'{"nativeControlsForTouch": false}\'>' +
            '<source src="' + url + '" type="application/vnd.ms-sstr+xml" />' +
                    '<p class="amp-no-js">' +
                        'This is the first Iterations of my Project. Thank you for watching</p> </video>';
        $("#videoBody").html(vidcontent);
        $('#videoModal').modal('show');
    }
</script>